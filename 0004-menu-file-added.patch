From fd3045762d75ce86dc407c1dbbb014177d5d6261 Mon Sep 17 00:00:00 2001
From: kathiravan <kathiravan.s@ltts.com>
Date: Wed, 8 Apr 2020 13:42:24 +0530
Subject: [PATCH 4/9] menu file added

---
 src/App.js           | 63 ++++++++++------------------------------
 src/mainMenu/menu.js | 68 ++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 83 insertions(+), 48 deletions(-)
 create mode 100644 src/mainMenu/menu.js

diff --git a/src/App.js b/src/App.js
index 1308f19..8aaee0c 100644
--- a/src/App.js
+++ b/src/App.js
@@ -1,7 +1,5 @@
 import { Lightning, Utils } from 'wpe-lightning-sdk'
-import { ListItem, ImageListItem } from './core/list.js'
-import Model from './mainMenu/model.js'
-import { getBackground, getMainList, getSubMenuList } from './mainMenu/view.js'
+import Menu from './mainMenu/menu.js'
 
 export default class App extends Lightning.Component {
   static getFonts() {
@@ -10,61 +8,30 @@ export default class App extends Lightning.Component {
 
   static _template() {
     return {
-      x: 0,
-      y: 0,
-      BackGround: getBackground(),
-      MainList: getMainList(),
-      SubMenuList: getSubMenuList()
+      Menu: {
+        type: Menu,
+        alpha: 1
+      }
     }
   }
 
-  _construct() {
-    this.model = new Model()
-    this.model.data = {}
-  }
-
-  _init() {
-    this.model.getMenu().then(data => {
-      this.model.data = data
-      this.tag('MainList').ListItemsComponend = ListItem
-      this.tag('SubMenuList').ListItemsComponend = ImageListItem
-      this.tag('MainList').items = data.map(i => ({ label: i.title }))
-      this.tag('SubMenuList').items = data[0].submenu.map(i => ({ label: i }))
-      this._setState('MainList')
-    })
-  }
-
-  _handleUp() {
-    this._setState('MainList')
-  }
-
-  _handleDown() {
-    this._setState('SubMenuList')
+  _setup() {
+    this._setState('Menu')
   }
 
   static _states() {
     return [
-      class SubMenuList extends this {
-        _getFocused() {
-          return this.tag('SubMenuList')
+      class Menu extends this {
+        $enter() {
+          this.tag('Menu').setSmooth('alpha', 1)
         }
-        select({ item }) {
-          console.log(item)
+
+        $exit() {
+          this.tag('Menu').setSmooth('alpha', 0)
         }
-      },
-      class MainList extends this {
+
         _getFocused() {
-          return this.tag('MainList')
-        }
-        select({ item }) {
-          let data = this.model.data
-          this.tag('SubMenuList').items = []
-          for (var index in data) {
-            if (item.item.label === data[index].title) {
-              this.tag('SubMenuList').items = data[index].submenu.map(i => ({ label: i }))
-              break
-            }
-          }
+          return this.tag('Menu')
         }
       }
     ]
diff --git a/src/mainMenu/menu.js b/src/mainMenu/menu.js
new file mode 100644
index 0000000..d68171e
--- /dev/null
+++ b/src/mainMenu/menu.js
@@ -0,0 +1,68 @@
+import { Lightning, Utils } from 'wpe-lightning-sdk'
+import { ListItem, ImageListItem } from './../core/list.js'
+import Model from './model.js'
+import { getBackground, getMainList, getSubMenuList } from './view.js'
+
+export default class Menu extends Lightning.Component {
+  static _template() {
+    return {
+      x: 0,
+      y: 0,
+      BackGround: getBackground(),
+      MainList: getMainList(),
+      SubMenuList: getSubMenuList()
+    }
+  }
+
+  _construct() {
+    this.model = new Model()
+    this.model.data = {}
+  }
+
+  _init() {
+    this.model.getMenu().then(data => {
+      this.model.data = data
+      this.tag('MainList').ListItemsComponend = ListItem
+      this.tag('SubMenuList').ListItemsComponend = ImageListItem
+      this.tag('MainList').items = data.map(i => ({ label: i.title }))
+      this.tag('SubMenuList').items = data[0].submenu.map(i => ({ label: i }))
+      this._setState('MainList')
+    })
+  }
+
+  _handleUp() {
+    this._setState('MainList')
+  }
+
+  _handleDown() {
+    this._setState('SubMenuList')
+  }
+
+  static _states() {
+    return [
+      class SubMenuList extends this {
+        _getFocused() {
+          return this.tag('SubMenuList')
+        }
+        select({ item }) {
+          console.log(item)
+        }
+      },
+      class MainList extends this {
+        _getFocused() {
+          return this.tag('MainList')
+        }
+        select({ item }) {
+          let data = this.model.data
+          this.tag('SubMenuList').items = []
+          for (var index in data) {
+            if (item.item.label === data[index].title) {
+              this.tag('SubMenuList').items = data[index].submenu.map(i => ({ label: i }))
+              break
+            }
+          }
+        }
+      }
+    ]
+  }
+}
-- 
2.23.0.windows.1

